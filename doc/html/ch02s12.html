<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>2.12. Drucken mit kivitendo</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1-RC2"><link rel="home" href="index.html" title="kivitendo 3.5.6.1: Installation, Konfiguration, Entwicklung"><link rel="up" href="ch02.html" title="Kapitel 2. Installation und Grundkonfiguration"><link rel="prev" href="ch02s11.html" title="2.11. E-Mail-Versand aus kivitendo heraus"><link rel="next" href="ch02s13.html" title="2.13. OpenDocument-Vorlagen"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2.12. Drucken mit kivitendo</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch02s11.html">Zurück</a>&nbsp;</td><th width="60%" align="center">Kapitel 2. Installation und Grundkonfiguration</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch02s13.html">Weiter</a></td></tr></table><hr></div><div class="sect1" title="2.12. Drucken mit kivitendo"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Drucken-mit-kivitendo"></a>2.12. Drucken mit kivitendo</h2></div></div></div><p>Das Drucksystem von kivitendo benutzt von Haus aus LaTeX-Vorlagen.
      Um drucken zu können, braucht der Server ein geeignetes LaTeX System. Am
      einfachsten ist dazu eine <code class="literal">texlive</code> Installation. Unter
      debianoiden Betriebssystemen installiert man die Pakete mit:</p><p>
            </p><pre class="programlisting">apt install texlive-base-bin texlive-latex-recommended texlive-fonts-recommended \
  texlive-latex-extra texlive-lang-german texlive-generic-extra texlive-xetex ghostscript</pre><p>
         </p><p>Für Fedora benötigen Sie die folgenden Pakete:</p><p>
            </p><pre class="programlisting">dnf install texlive-collection-latex texlive-collection-latexextra \
  texlive-collection-latexrecommended texlive-collection-langgerman \
  texlive-collection-langenglish</pre><p>
         </p><p>Für openSUSE benötigen Sie die folgenden Pakete:</p><p>
            </p><pre class="programlisting">zypper install texlive-collection-latex texlive-collection-latexextra \
  texlive-collection-latexrecommended texlive-collection-langgerman \
  texlive-collection-langenglish</pre><p>
         </p><div class="note" title="Anmerkung" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Anmerkung]" src="system/docbook-xsl/images/note.png"></td><th align="left">Anmerkung</th></tr><tr><td align="left" valign="top">kivitendo erwartet eine aktuelle TeX Live Umgebung, um PDF/A zu erzeugen. Aktuelle Distributionen von 2020 erfüllen diese. Überprüfbar ist dies mit dem Aufruf des installation_check.pl mit Parameter -l: <pre class="programlisting">scripts/installations_check.pl -l</pre></td></tr></table></div><p>kivitendo bringt drei alternative Vorlagensätze mit:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>RB</p></li><li class="listitem"><p>marei</p></li><li class="listitem"><p>rev-odt</p></li></ul></div><p>Der ehemalige Druckvorlagensatz "f-tex" wurde mit der Version
      3.6 entfernt, da er nicht mehr gepflegt wird.</p><div class="sect2" title="2.12.1. Vorlagenverzeichnis anlegen"><div class="titlepage"><div><div><h3 class="title"><a name="Vorlagenverzeichnis-anlegen"></a>2.12.1. Vorlagenverzeichnis anlegen</h3></div></div></div><p>Es lässt sich ein initialer Vorlagensatz erstellen. Die
        LaTeX-System-Abhängigkeiten hierfür kann man prüfen mit:</p><pre class="programlisting">./scripts/installation_check.pl -lv</pre><p>Der Angemeldete Benutzer muss in einer Gruppe sein, die über das
        Recht "Konfiguration -&gt; Mandantenverwaltung" verfügt. Siehe auch
        <a class="xref" href="ch02s09.html#Gruppen-anlegen" title="2.9.4. Gruppen anlegen">Abschnitt&nbsp;2.9.4, „Gruppen anlegen“</a>.</p><p>Im Userbereich lässt sich unter: "<span class="guimenu">System</span>
        -&gt; <span class="guisubmenu">Mandantenverwaltung</span> -&gt;
        <span class="guimenuitem">Verschiedenes</span>" die Option "Neue
        Druckvorlagen aus Vorlagensatz erstellen" auswählen.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                     <code class="option">Vorlagen auswählen</code>: Wählen Sie hier den
            Vorlagensatz aus, der kopiert werden soll
            (<code class="filename">RB</code>, <code class="filename">marei</code> oder
            <code class="filename">odt-rev</code>.)</p></li><li class="listitem"><p>
                     <code class="option">Neuer Name</code>: Der Verzeichnisname für den
            neuen Vorlagensatz. Dieser kann im Rahmen der üblichen Bedingungen
            für Verzeichnisnamen frei gewählt werden.</p></li></ol></div><p>Nach dem Speichern wird das Vorlagenverzeichnis angelegt und ist
        für den aktuellen Mandanten ausgewählt. Der gleiche Vorlagensatz kann,
        wenn er mal angelegt ist, bei mehreren Mandanten verwendet werden.
        Eventuell müssen Anpassungen (Logo, Erscheinungsbild, etc) noch
        vorgenommen werden. Den Ordner findet man im Dateisystem unter
        <code class="filename">./templates/[Neuer Name]</code>
            </p></div><div class="sect2" title="2.12.2. Der Druckvorlagensatz RB"><div class="titlepage"><div><div><h3 class="title"><a name="Vorlagen-RB"></a>2.12.2. Der Druckvorlagensatz RB</h3></div></div></div><p>Hierbei handelt es sich um einen vollständigen LaTeX
        Dokumentensatz mit alternativem Design. Die odt oder html-Varianten
        sind nicht gepflegt.</p><p>Die konzeptionelle Idee der Vorlagen wird <a class="ulink" href="http://www.kivitendo-support.de/vortraege/Lx-Office%20Anwendertreffen%20LaTeX-Druckvorlagen-Teil3-finale.pdf" target="_top">hier</a>
        auf Folie 5 bis 10 vorgestellt. Informationen zur Anpassung an die
        eigenen Firmendaten finden sich in der Datei Readme.tex im
        Vorlagenverzeichnis.</p><p>Eine kurze Übersicht der Features:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Mehrsprachenfähig, mit Deutscher und Englischer
            Übersetzung</p></li><li class="listitem"><p>Zentrale Konfigurationsdateien, die für alle Belege benutzt
            werden, z.B. für Kopf- und Fußzeilen, und Infos wie
            Bankdaten</p></li><li class="listitem"><p>mehrere vordefinierte Varianten für
            Logos/Hintergrundbilder</p></li><li class="listitem"><p>Berücksichtigung für Steuerzonen "EU mit USt-ID Nummer" oder
            "Außerhalb EU"</p></li></ul></div></div><div class="sect2" title="2.12.3. Der Druckvorlagensatz rev-odt"><div class="titlepage"><div><div><h3 class="title"><a name="Vorlagen-rev-odt"></a>2.12.3. Der Druckvorlagensatz rev-odt</h3></div></div></div><p>Hierbei handelt es sich um einen Dokumentensatz der mit
        odt-Vorlagen erstellt wurde. Es gibt in dem Verzeichnis eine
        Readme-Datei, die eventuell aktueller als die Dokumentation hier ist.
        Die odt-Vorlagen in diesem Verzeichnis "rev-odt" wurden von revamp-it,
        Zürich erstellt und werden laufend aktualisiert. Ein paar der
        Formulierungen in den Druckvorlagen entsprechen dem Schweizer
        Sprachgebrauch, z.B. "Offerte" oder "allfällig".</p><p>Hinweis zum Einsatz des Feldes "Land" bei den Stammdaten für
        KundInnen und LieferantInnen, sowie bei Lieferadressen: Die in diesem
        Vorlagensatz vorhandenen Vorlagen erwarten für "Land" das
        entsprechende Kürzel, das in Adressen vor die Postleitzahl gesetzt
        wird. Das Feld kann auch komplett leer bleiben. Wer dies anders
        handhaben möchte, muss die Vorlagen entsprechend anpassen.</p><p>odt-Vorlagen können mit LibreOffice oder OpenOffice editiert und
        den eigenen Bedürfnissen angepasst werden. Wichtig beim Editieren von
        if-Blöcken ist, dass immer der gesamte Block überschrieben werden muss
        und nicht nur Teile davon, da dies sonst oft zu einer odt-Datei führt,
        die vom Parser nicht korrekt gelesen werden kann.</p><p>Mahnungen können unter folgenden Einschränkungen mit den
        odt-Vorlagen im Vorlagensatz rev-odt erzeugt werden:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>als Druckoption steht nur 'PDF(OpenDocument/OASIS)' zur
            Verfügung, das heisst, die Mahnungen werden als PDF-Datei
            ausgegeben.</p></li><li class="listitem"><p>für jede Rechnung muss eine eigene Mahnung erzeugt werden
            (auch wenn bei einzelnen KundInnen mehrere überfällige Rechnungen
            vorhanden sind).</p></li></ul></div><p>Mehrere Mahnungen für eine Kundin / einen Kunden werden zu einer
        PDF-Datei zusammengefasst</p><p>Die Vorlagen zahlungserinnerung.odt sowie mahnung.odt sind für
        das Erstellen einer Zahlungserinnerung bzw. Mahnung selbst vorgesehen,
        die Vorlage mahnung_invoice.odt für das Erstellen einer Rechnung über
        die verrechneten Mahngebühren und Verzugszinsen.</p><p>Zur Zeit gibt es in kivitendo noch keine Möglichkeit,
        odt-Vorlagen bei Briefen und Pflichtenheften einzusetzen.
        Entsprechende Vorlagen sind deshalb nicht vorhanden.</p><p>Fehlermeldungen, Anregungen und Wünsche bitte senden an:
        empfang@revamp-it.ch</p></div><div class="sect2" title="2.12.4. Allgemeine Hinweise zu LaTeX Vorlagen"><div class="titlepage"><div><div><h3 class="title"><a name="allgemeine-hinweise-zu-latex"></a>2.12.4. Allgemeine Hinweise zu LaTeX Vorlagen</h3></div></div></div><p>In den allermeisten Installationen sollte das Drucken jetzt
        schon funktionieren. Sollte ein Fehler auftreten, wirft TeX sehr lange
        Fehlerbeschreibungen, der eigentliche Fehler ist immer die erste
        Zeile, die mit einem Ausrufezeichen anfängt. Häufig auftretende Fehler
        sind zum Beispiel:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>! LaTeX Error: File `eurosym.sty' not found. Die
            entsprechende LaTeX-Bibliothek wurde nicht gefunden. Das tritt vor
            allem bei Vorlagen aus der Community auf. Installieren Sie die
            entsprechenden Pakete.</p></li><li class="listitem"><p>! Package inputenc Error: Unicode char \u8:... set up for
            use with LaTeX. Dieser Fehler tritt auf, wenn sie versuchen mit
            einer Standardinstallation exotische utf8 Zeichen zu drucken.
            TeXLive unterstützt von Haus nur romanische Schriften und muss mit
            diversen Tricks dazu gebracht werden andere Zeichen zu
            akzeptieren. Adere TeX Systeme wie XeTeX schaffen hier
            Abhilfe.</p></li></ul></div><p>Wird gar kein Fehler angezeigt, sondern nur der Name des
        Templates, heißt das normalerweise, dass das LaTeX Binary nicht
        gefunden wurde. Prüfen Sie den Namen in der Konfiguration (Standard:
        <code class="literal">pdflatex</code>), und stellen Sie sicher, dass pdflatex
        (oder das von Ihnen verwendete System) vom Webserver ausgeführt werden
        darf.</p><p>Wenn sich das Problem nicht auf Grund der Ausgabe im Webbrowser
        verifizieren lässt:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>editiere [kivitendo-home]/config/kivitendo.conf und ändere
            "keep_temp_files" auf 1</p><p>
                     </p><pre class="programlisting">keep_temp_files = 1;</pre><p>
                  </p></li><li class="listitem"><p>bei fastcgi oder mod_perl den Webserver neu Starten</p></li><li class="listitem"><p>Nochmal einen Druckversuch im Webfrontend auslösen</p></li><li class="listitem"><p>wechsel in das users Verzeichnis von kivitendo</p><p>
                     </p><pre class="programlisting">cd [kivitendo-home]/users</pre><p>
                  </p></li><li class="listitem"><p>LaTeX Suchpfad anpassen:</p><p>
                     </p><pre class="programlisting">export TEXINPUTS=".:[kivitendo-home]/templates/[aktuelles_template_verzeichniss]:"</pre><p>
                  </p></li><li class="listitem"><p>Finde heraus, welche Datei kivitendo beim letzten Durchlauf
            erstellt hat</p><p>
                     </p><pre class="programlisting">ls -lahtr ./1*.tex</pre><p>
                  </p><p>Es sollte die letzte Datei ganz unten sein</p></li><li class="listitem"><p>für besseren Hinweis auf Fehler texdatei nochmals
            übersetzen</p><p>
                     </p><pre class="programlisting">pdflatex ./1*.tex</pre><p>
                  </p><p>in der *.tex datei nach dem Fehler suchen.</p></li></ul></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch02s11.html">Zurück</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch02.html">Nach oben</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch02s13.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">2.11. E-Mail-Versand aus kivitendo heraus&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top">&nbsp;2.13. OpenDocument-Vorlagen</td></tr></table></div></body></html>