[% USE T8 %]
[% USE HTML %]
[% USE L %]
[% USE P %]
[% USE LxERP %]

[% DEFAULT var_name = HTML.escape(cvar_name_prefix) _ HTML.escape(var.config.name) _ HTML.escape(cvar_name_postfix) %]

[% IF ( hide_non_editable && !var.config.is_flag('editable') ) %]
  [% L.hidden_tag(var_name, var.value) %]
[% ELSIF ( !var.is_valid ) %]
  [% IF ( show_disabled_message ) %]
    [% 'Element disabled' | $T8 %]
  [% END %]
[% ELSIF ( var.config .type == 'bool' ) %]
  [% L.checkbox_tag(var_name, checked = var.value, for_submit = 1) %]
[% ELSIF ( var.config .type == 'textfield' ) %]
  [% L.textarea_tag(var_name, var.value, cols = var.config.processed_options.WIDTH, rows = var.config.processed_options.HEIGHT) %]
[% ELSIF ( var.config.type == 'date' ) %]
  [% L.date_tag(var_name, var.value, class='wi-date') %]
[% ELSIF ( var.config.type == 'timestamp' ) %]
  [% L.input_tag(var_name, var.value) %]
[% ELSIF ( var.config.type == 'customer' ) %]
  [% P.customer_vendor.picker(var_name, var.value, type='customer') %]
[% ELSIF ( var.config.type == 'vendor' ) %]
  [% P.customer_vendor.picker(var_name, var.value, type='vendor') %]
[% ELSIF ( var.config.type == 'part' ) %]
  [% P.part.picker(var_name, var.value, class='wi-wide') %]
[% ELSIF ( var.config.type == 'select' ) %]
  [% L.select_tag(var_name, var.config.processed_options, default = var.value, class='wi-wide') %]
[% ELSIF ( var.config.type == 'number' ) %]
  [% L.input_tag(var_name, LxERP.format_amount(var.value, -2), class='wi-small numeric') %]
[% ELSE %]
  [% L.input_tag(var_name, var.value, maxlength = var.config.processed_options.MAXLENGTH, class='wi-wide') %]
[% END %]
