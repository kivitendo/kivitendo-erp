[% USE HTML %]

[% SET start_new_row = '1' %]

[% FOREACH var = variables %]
  [% IF var.includeable %]
    [% IF start_new_row %]
      <tr>
      [% SET start_new_row = '0' %]
    [% END %]
    <td id="[% HTML.escape(include_prefix) %]cvartd_[% HTML.escape(var.name) %]">
      <input type="checkbox" name="[% HTML.escape(include_prefix) %]cvar_[% HTML.escape(var.name) %]" id="[% HTML.escape(include_prefix) %]cvar_[% HTML.escape(var.name) %]" value="[% HTML.escape(include_value) %]"[% IF var.included_by_default %] checked[% END %]>
      <label for="[% HTML.escape(include_prefix) %]cvar_[% HTML.escape(var.name) %]">[% HTML.escape(var.description) %]</label>
    </td>

    [% UNLESS loop.count % 4 %][% SET start_new_row = '1' %]
  [% END %]
  [% IF start_new_row || loop.last %]
    </tr>
  [% END %]
[% END %]

[% END %]
