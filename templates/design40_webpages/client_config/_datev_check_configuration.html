[% USE LxERP %]
[% USE L %]

<div id="datev_check_configuration">
<div class="wrapper">

<p>[% LxERP.t8('It is possible to make a quick DATEV export everytime you post a record to ensure things work nicely with their data requirements. This will result in a slight overhead though you can enable this for each type of record independently.') %]</p>



<table class="tbl-horizontal">
  <tbody>
  <tr>
    <th>[% LxERP.t8('Check on sales invoice') %]</th>
    <td>[% L.yes_no_tag('defaults.datev_check_on_sales_invoice', SELF.defaults.datev_check_on_sales_invoice) %]</td>
    <td class="longdesc">[% LxERP.t8('Perform check when a sales invoice or a payment for a sales invoice is posted?') %]</td>
  </tr>
  <tr>
    <th>[% LxERP.t8('Check on purchase invoice') %]</th>
    <td>[% L.yes_no_tag('defaults.datev_check_on_purchase_invoice', SELF.defaults.datev_check_on_purchase_invoice) %]</td>
    <td class="longdesc">[% LxERP.t8('Perform check when a purchase invoice or a payment for a purchase invoice is posted?') %]</td>
  </tr>
  <tr>
    <th>[% LxERP.t8('Check on ar transaction') %]</th>
    <td>[% L.yes_no_tag('defaults.datev_check_on_ar_transaction', SELF.defaults.datev_check_on_ar_transaction) %]</td>
    <td class="longdesc">[% LxERP.t8('Perform check when an ar transaction is posted?') %]</td>
  </tr>
  <tr>
    <th>[% LxERP.t8('Check on ap transaction') %]</th>
    <td>[% L.yes_no_tag('defaults.datev_check_on_ap_transaction', SELF.defaults.datev_check_on_ap_transaction) %]</td>
    <td class="longdesc">[% LxERP.t8('Perform check when an ap transaction is posted?') %]</td>
  </tr>
  <tr>
    <th>[% LxERP.t8('Check on gl transaction') %]</th>
    <td>[% L.yes_no_tag('defaults.datev_check_on_gl_transaction', SELF.defaults.datev_check_on_gl_transaction) %]</td>
    <td class="longdesc">[% LxERP.t8('Perform check when a gl transaction is posted?') %]</td>
  </tr>
  <tr>
    <th>[% LxERP.t8('Datev export encoding') %]</th>
    <td>[% L.select_tag('defaults.datev_export_format', [ [ 'cp1252', LxERP.t8('Strict and halt') ],[ 'cp1252-translit', LxERP.t8('Strict but replace') ],[ 'utf-8', LxERP.t8('Relaxed (UTF-8)') ]  ], default=SELF.defaults.datev_export_format) %]</td>
    <td class="longdesc">[% LxERP.t8('DATEV expects the encoding to be Western Europe conform (LATIN-1, cp1252). By setting this to "Strict and halt" the DATEV export halts with a error if there is a single character in "Posting Text" which is not LATIN-1 encodeable. By setting this to "Strict but replace" kivitendo will replace the character with a similar one and the export will simply warn about those fields. By setting this to relaxed (UTF-8) the DATEV export encoding will be in kivitendo (UTF-8) encoded and the external import program has to handle this (this may work for DATEV deriviates or future versions of DATEV). Background details: For example turkish characters (Ç) are not valid cp1252 charactes and armenian characters like "Գեղարդ" are probably not replaceable in cp1252') %]</td>
  </tr>
  </tbody>
</table>

</div><!-- /.wrapper -->
</div><!-- /#datev_check_configuration.wrapper -->
