[%- USE T8 %]
[%- USE LxERP %]
[%- USE L %]

<div id="additional_billing_addresses">
  <table id="additional_billing_address_table">
    <tr>
      <th align="right">[% 'Billing Address' | $T8 %]</th>

      <td>
        [% L.select_tag(
             'additional_billing_address.id',
             SELF.additional_billing_addresses,
             default     = SELF.additional_billing_address.id,
             value_key   = 'id',
             title_key   = 'displayable_id',
             with_empty  = 1,
             empty_title = LxERP.t8('New address'),
             onchange    = "kivi.CustomerVendor.selectAdditionalBillingAddress({onFormSet: function(){ additionalBillingAddressMapWidget.testInputs(); kivi.reinit_widgets(); }});",
           )
        %]
      </td>
    </tr>

    <tr>
      <th align="right" nowrap>[% 'Default Billing Address' | $T8 %]</th>
      <td>[% L.yes_no_tag('additional_billing_address.default_address', SELF.additional_billing_address.default_address) %]</td>
    </tr>

    <tr>
      <th align="right" nowrap>[% 'Name' | $T8 %]</th>

      <td>
        [% L.input_tag('additional_billing_address.name', SELF.additional_billing_address.name,  size = 35) %]
      </td>
    </tr>

    <tr>
      <th align="right" nowrap>[% 'Department' | $T8 %]</th>

      <td>
        [% L.input_tag('additional_billing_address.department_1', SELF.additional_billing_address.department_1,  size = 16) %]
        [% L.input_tag('additional_billing_address.department_2', SELF.additional_billing_address.department_2,  size = 16) %]
      </td>
    </tr>

    <tr>
      <th align="right" nowrap>[% 'Street' | $T8 %]</th>

      <td>
        [% L.input_tag('additional_billing_address.street', SELF.additional_billing_address.street,  size = 35) %]

        <span id="additional_billing_address_map"></span>
        <script type="text/javascript">
          additionalBillingAddressMapWidget = new kivi.CustomerVendor.MapWidget('additional_billing_address_');
          $(function() {
            additionalBillingAddressMapWidget.render($('#additional_billing_address_map'));
          });
        </script>
      </td>
    </tr>

    <tr>
      <th align="right" nowrap>[% 'Zipcode' | $T8 %]/[% 'City' | $T8 %]</th>

      <td>
        [% L.input_tag('additional_billing_address.zipcode', SELF.additional_billing_address.zipcode,  size = 5) %]
        [% L.input_tag('additional_billing_address.city', SELF.additional_billing_address.city,  size = 30) %]
      </td>
    </tr>

    <tr>
      <th align="right" nowrap>[% 'Country' | $T8 %]</th>

      <td>
        [% L.input_tag('additional_billing_address.country', SELF.additional_billing_address.country,  size = 35) %]
      </td>
    </tr>

    <tr>
      <th align="right" nowrap>[% 'GLN' | $T8 %]</th>

      <td>
        [% L.input_tag('additional_billing_address.gln', SELF.additional_billing_address.gln,  size = 30) %]
      </td>
    </tr>

    <tr>
      <th align="right" nowrap>[% 'Contact' | $T8 %]</th>

      <td>
        [% L.input_tag('additional_billing_address.contact', SELF.additional_billing_address.contact,  size = 30) %]
      </td>
    </tr>

    <tr>
      <th align="right" nowrap>[% 'Phone' | $T8 %]</th>

      <td>
        [% L.input_tag('additional_billing_address.phone', SELF.additional_billing_address.phone,  size = 30) %]
      </td>
    </tr>

    <tr>
      <th align="right" nowrap>[% 'Fax' | $T8 %]</th>

      <td>
        [% L.input_tag('additional_billing_address.fax', SELF.additional_billing_address.fax,  size = 30) %]
      </td>
    </tr>

    <tr>
      <th align="right" nowrap>[% 'E-mail' | $T8 %]</th>

      <td>
        [% L.input_tag('additional_billing_address.email', SELF.additional_billing_address.email,  size = 45) %]
      </td>
    </tr>
  </table>

  [% L.button_tag('submitInputButton("delete_additional_billing_address");', LxERP.t8('Delete address'), class = 'submit') %]
  [% IF ( !SELF.additional_billing_address.id ) %]
    <script type="text/javascript">
      $('#action_delete_additional_billing_address').hide();
    </script>
  [% END %]
</div>
