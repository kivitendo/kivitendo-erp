[%- USE T8 %]
[%- USE L %]
[%- USE LxERP %]
[%- USE HTML %]

<form action='controller.pl' method='post' id='filter_form'>
 <div class='filter_toggle' style='display:none'>
  <a href='#' onClick='javascript:$(".filter_toggle").toggle()'>[% 'Show Filter' | $T8 %]</a>
  [% SELF.filter_summary | html %]
 </div>

 <div class='filter_toggle'>
  <a href='#' onClick='javascript:$(".filter_toggle").toggle()'>[% 'Hide Filter' | $T8 %]</a>
  <table id='filter_table'>
   <tr>
    <th align="right">[% 'Stock Counting' | $T8 %]</th>
    <td>
     [% L.select_tag('filter.counting_id', SELF.countings,
                     default         => filter.counting_id,
                     title_key       => 'name',
                     value_key       => 'id',
                     with_empty      => 1,
                     style           => 'width: 200px',
                     'data-validate' => 'required',
                     onchange        =>'kivi.validate_form("#filter_form") && kivi.submit_form_with_action($("#filter_form"), "StockCountingReconciliation/list")') %]
    </td>
   </tr>
  </table>

 [% L.hidden_tag('sort_by', FORM.sort_by) %]
 [% L.hidden_tag('sort_dir', FORM.sort_dir) %]
 [% L.hidden_tag('page', FORM.page) %]
 [% L.button_tag('$("#filter_form").clearForm()', LxERP.t8('Reset')) %]
 </div>

</form>
